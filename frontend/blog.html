<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog | Portfolio</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <nav class="left-sidebar">
        <div class="sidebar-header">INDEX</div>
        <a href="index.html" class="toc-link">Cover</a>
        <a href="about.html" class="toc-link">About</a>
        <a href="education.html" class="toc-link">Education</a>
        <a href="experience.html" class="toc-link">Experience</a>
        <a href="projects.html" class="toc-link">Projects</a>
        <a href="blog.html" class="toc-link active">Blog</a>
        <a href="contact.html" class="toc-link">Contact</a>
    </nav>

    <div class="book-wrapper">
        <div class="book-frame">
            <div class="left-page">
                <h2 class="chapter-title">VI. Blog</h2>
                <div id="blogListLeft"></div>
            </div>
            <div class="right-page">
                <div id="blogListRight"></div>
            </div>
        </div>
        <div class="nav-bar">
            <a href="projects.html" class="nav-btn"><i class="fas fa-chevron-left"></i></a>
            <span class="mono">Blog</span>
            <a href="contact.html" class="nav-btn"><i class="fas fa-chevron-right"></i></a>
        </div>
    </div>
    <script src="script.js"></script>
    <script>
        fetch('../backend/blog_handler.php?action=fetch_all').then(r => r.json()).then(data => {
            const mid = Math.ceil(data.length / 2);
            const left = data.slice(0, mid);
            const right = data.slice(mid);

            const render = (item) => `
                <div class="blog-card" style="margin-bottom:25px; border-left:3px solid #8e44ad; padding-left:15px;">
                    <div class="blog-date" style="font-size:0.7rem; color:#888;">${item.date} â€¢ ${item.category}</div>
                    <h3 style="margin:5px 0;">${item.title}</h3>
                    <p style="font-size:0.9rem; color:#555;">${item.excerpt}</p>
                </div>`;

            document.getElementById('blogListLeft').innerHTML = left.map(render).join('');
            document.getElementById('blogListRight').innerHTML = right.map(render).join('');
        });
    </script>
</body>

</html>