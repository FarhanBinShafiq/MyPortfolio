<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About | Portfolio</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .left-page, .right-page { padding: 40px !important; display: flex; flex-direction: column; justify-content: center; }
        .profile-frame {
            border: 1px solid #ddd; padding: 8px; background: #fff;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); transform: rotate(2deg);
            margin-bottom: 20px; transition: transform 0.3s;
            max-width: 250px; margin-left: auto; margin-right: auto;
        }
        .profile-frame:hover { transform: rotate(0deg) scale(1.02); }
        .service-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 15px; }
        .service-card { background: #f9f9f9; border: 1px solid #eee; padding: 15px 10px; text-align: center; border-radius: 4px; transition: all 0.2s; }
        .service-card:hover { background: #fff; border-color: var(--accent); transform: translateY(-3px); }
        .s-icon { font-size: 1.2rem; color: #888; margin-bottom: 8px; display: block; }
        .service-card:hover .s-icon { color: var(--accent); }
        .s-title { font-family: 'Space Mono'; font-size: 0.7rem; text-transform: uppercase; color: #333; }
        p { font-size: 1rem; line-height: 1.6; margin-bottom: 15px; }
        .cv-table td { padding: 5px 0; }
        .paper-input { margin-bottom: 10px; padding: 8px 0; }
        @media (max-width: 900px) {
            .book-frame { flex-direction: column; height: auto !important; }
            .left-sidebar { display: none !important; }
            .service-grid { grid-template-columns: 1fr 1fr; }
        }
    </style>
</head>
<body>

    <nav class="left-sidebar">
        <div class="sidebar-header">INDEX</div>
        <a href="index.html" class="toc-link">Cover</a>
        <a href="about.html" class="toc-link active">About</a>
        <a href="education.html" class="toc-link">Education</a>
        <a href="experience.html" class="toc-link">Experience</a>
        <a href="projects.html" class="toc-link">Projects</a>
        <a href="blog.html" class="toc-link">Blog</a>
        <a href="glance.html" class="toc-link" style="color: var(--accent);">Resume</a>
        <a href="contact.html" class="toc-link">Contact</a>
    </nav>

    <div class="book-wrapper">
        <div class="book-frame">
            <div class="left-page">
                <div class="profile-frame reveal-text delay-1">
                    <img id="view_image" src="" alt="Profile" style="width: 100%; display: block;">
                    <div class="caption">Fig 1.1: The Engineer</div>
                </div>

                <h2 class="chapter-title reveal-text delay-2">I. About Me</h2>
                
                <p class="reveal-text delay-3" id="view_intro">Loading...</p>
                
                <p class="reveal-text delay-4" id="view_bio">Loading...</p>
            </div>

            <div class="right-page">
                <div class="reveal-text delay-2">
                    <h3 style="font-size: 0.9rem; margin-bottom: 10px; text-transform: uppercase; color: #888;">Vitals</h3>
                    <table class="cv-table">
                        <tr><td class="cv-label">Residence</td><td id="view_residence">...</td></tr>
                        <tr><td class="cv-label">Experience</td><td id="view_experience">...</td></tr>
                        <tr><td class="cv-label">Email</td><td id="view_email">...</td></tr>
                    </table>
                </div>

                <div class="reveal-text delay-3" style="margin-top: 20px;">
                    <h3 style="font-size: 0.9rem; margin-bottom: 10px; text-transform: uppercase; color: #888;">Capabilities</h3>
                    <div class="service-grid" id="view_services"></div>
                </div>
                
                <div class="reveal-text delay-4" style="margin-top: auto; padding-top: 20px;">
                    <h2 class="chapter-title" style="font-size: 1.2rem; margin-bottom: 10px; border: none;">Send a Dispatch</h2>
                    <form onsubmit="event.preventDefault(); alert('Message Sent!');">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <input type="text" placeholder="NAME" class="paper-input" required>
                            <input type="email" placeholder="EMAIL" class="paper-input" required>
                        </div>
                        <textarea rows="2" placeholder="MESSAGE..." class="paper-input" style="resize: none;" required></textarea>
                        <button style="width: 100%; background: #1a1a1a; color: #fff; border: none; padding: 10px; font-family: 'Space Mono'; text-transform: uppercase; cursor: pointer; font-weight: bold; transition: 0.3s; font-size: 0.8rem;">Contact Me</button>
                    </form>
                </div>
            </div>
        </div>
        <div class="nav-bar">
            <a href="index.html" class="nav-btn"><i class="fas fa-chevron-left"></i></a>
            <span class="mono">Pages 3-4</span>
            <a href="education.html" class="nav-btn"><i class="fas fa-chevron-right"></i></a>
        </div>
    </div>
    
    <div class="social-sidebar">
        <a href="#" class="social-icon"><i class="fab fa-github"></i></a>
        <a href="#" class="social-icon"><i class="fab fa-linkedin-in"></i></a>
    </div>
    <button class="mobile-toggle" id="mobileToggle"><i class="fas fa-bars"></i></button>
    <div class="mobile-menu-overlay" id="mobileMenu">
        <a href="index.html" class="mobile-link">Home</a>
        <a href="about.html" class="mobile-link">About</a>
    </div>

    <script>
        const API = 'http://localhost:8000/backend/about_handler.php';

        async function loadContent() {
            try {
                const res = await fetch(`${API}?action=fetch_about`);
                const data = await res.json();
                const p = data.profile;
                const s = data.services;

                // 1. Render Profile Text
                document.getElementById('view_intro').innerHTML = 
                    `<span style="font-size: 3.5rem; float: left; line-height: 0.7; padding-right: 12px; font-family: 'Playfair Display'; font-weight: 700;">${p.intro_title}</span>${p.intro_body}`;
                
                document.getElementById('view_bio').innerText = p.bio_text;
                document.getElementById('view_residence').innerText = p.residence;
                document.getElementById('view_experience').innerText = p.experience;
                document.getElementById('view_email').innerText = p.email;
                
                // 2. Render Image (or default)
                if (p.image_url) {
                    document.getElementById('view_image').src = p.image_url;
                } else {
                    document.getElementById('view_image').src = "https://placehold.co/600x400";
                }

                // 3. Render Services Grid
                const grid = document.getElementById('view_services');
                grid.innerHTML = '';
                s.forEach(service => {
                    grid.innerHTML += `
                        <div class="service-card">
                            <i class="${service.icon} s-icon"></i>
                            <span class="s-title">${service.title}</span>
                        </div>
                    `;
                });

            } catch (error) {
                console.error("Backend Error:", error);
            }
        }

        // Initialize
        loadContent();
        
        // Navigation Logic
        const prevPageUrl = 'index.html'; const nextPageUrl = 'education.html';
    </script>
    <script src="script.js"></script>
</body>
</html>